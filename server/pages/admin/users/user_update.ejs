<%- include ('../../partials/header.ejs'); %>
<body id="page-top">

  <!-- Page Wrapper -->
  <div id="wrapper">
      <%- include('../../partials/sidebar.ejs', {section: 'users'}); %>

    <!-- Content Wrapper -->
    <div id="content-wrapper" class="d-flex flex-column">

      <!-- Main Content -->
      <div id="content">

          <%- include('../../partials/topbar.ejs', {user: user}); %>


        <!-- Begin Page Content TODO-->
        <div class="container-fluid">

          <!-- Page Heading -->
          <div class="d-sm-flex align-items-center justify-content-between mb-4">
            <h1 class="h3 mb-0 text-gray-800"><i class="fas fa-user-edit mr-2"></i>Modificar Contraseña</h1>
            <!--<a href="#" class="d-none d-sm-inline-block btn btn-sm btn-primary shadow-sm"><i class="fas fa-download fa-sm text-white-50"></i> Generate Report</a>-->
          </div>
          <% var messages = getMessages() %>
          <% if (messages.error) { %>
            <div class="alert alert-danger col-sm-12"><%= messages.error %></div>
          <% } %>
          <% if (messages.success) { %>
            <div class="alert alert-success col-sm-12"><%= messages.success %></div>
          <% } %>
          <form action="/admin/users/update<%= (users.length == 1) ? '/' + user.id : '' %>" method="post">
              <div class="form-group row">
                <label for="staticUser" class="col-sm-2 col-form-label">Usuario</label>
                <div class="col-md-4">
                  <!--<input type="text" readonly class="form-control-plaintext" id="staticUser" value="admin"> -->
                  <select class="custom-select my-1 mr-sm-2" id="userModSelect" required name="userid"<%= (users.length == 1) ? ' disabled' : '' %>>
                    <% (users.length > 1) ? '<option selected>Seleccione usuario</option>' : '' %>
                    <% users.forEach((user, index) => { %>
                    <option value="<%= user.id %>"<%= (users.length == 1) ? ' selected' : '' %>><%= user.username %></option>
                    <% }) %>
                  </select>
                </div>
              </div>
              <div class="form-group row">
                  <label for="inputPasswordNew1" class="col-sm-2 col-form-label">Contraseña Nueva</label>
                  <div class="col-md-4">
                    <input type="password" class="form-control" id="inputPasswordNew1" placeholder="Contraseña Nueva" required name="pass1">
                  </div>
                </div>
              <div class="form-group row">
                  <label for="inputPasswordNew2" class="col-sm-2 col-form-label">Repetir Contraseña Nueva</label>
                  <div class="col-md-4">
                    <input type="password" class="form-control" id="inputPasswordNew2" placeholder="Repetir Contraseña Nueva" required name="pass2">
                  </div>
                </div>
              <div class="form-group row">
                  <div class="col-md-2"></div>
                  <div class="col-md-4">
                    <button type="submit" class="btn btn-lg btn-primary mb-2 btn-block"><i class="fas fa-user-edit mr-2"></i>Modificar Contraseña</button>
                  </div>
              </div>
            </form>

          </div>
        <!-- /.container-fluid -->

      </div>
      <!-- End of Main Content -->

<%- include ('../../partials/footer.ejs'); %>

</body>

</html>
